# Relay-C#

Relay — это русскоязычный аналог Discord, написанный на C# и предназначенный для создания чатов, серверов и голосовых каналов. Цель проекта — предоставить удобную и функциональную платформу для общения, поддержки сообществ и совместного использования серверов. Приложение поддерживает мультиязычность (русский и английский) и имеет встроенную систему аутентификации и авторизации.

## Возможности

- **Создание серверов и каналов** для группового общения
- **Личные сообщения (DM)** для прямой связи между пользователями
- **Голосовые каналы** для голосового общения
- **Мультиязычность** с поддержкой русского и английского языков
- **Уведомления и настройки звука** для удобного управления каналами
- **Аутентификация с использованием JWT-токенов** для защиты данных
- **Поддержка Swagger** для API-документации

## Стек технологий

- **.NET 8** — платформа для разработки API
- **Entity Framework Core** — ORM для работы с базой данных PostgreSQL
- **JWT Bearer Authentication** — для безопасной аутентификации
- **I18N.DotNet** — библиотека для интернационализации

## Установка и запуск проекта

### 1. Клонирование репозитория
```bash
git clone https://github.com/your-username/Relay-C.git
cd Relay-C
```

### 2. Установка зависимостей
Перед началом работы убедитесь, что установлены все необходимые NuGet-пакеты:

```bash
dotnet restore
```

### 3. Настройка базы данных
Убедитесь, что у вас запущен сервер PostgreSQL. В файле appsettings.json укажите настройки подключения:

```json
"ConnectionStrings": {
  "DefaultConnection": "Host=localhost;Database=relay;Username=yourusername;Password=yourpassword"
}
```

### 4. Настройка JWT-аутентификации
Для корректной работы аутентификации с JWT добавьте в appsettings.json следующие параметры:

```json
"Jwt": {
  "Key": "YourSecretKey",
  "Issuer": "YourIssuer",
  "Audience": "YourAudience"
}
```

### 5. Запуск миграций
Примените миграции для создания базы данных:

```bash
dotnet ef database update
```

### 6. Запуск приложения
Запустите приложение:

```bash
dotnet run
```

Приложение будет доступно по адресу http://localhost:5119.

## API Документация

API-документация доступна по адресу http://localhost:5119/swagger, где можно посмотреть все доступные API-методы и протестировать их напрямую через интерфейс Swagger.

## Использование локализации

Приложение поддерживает автоматическую локализацию на основе заголовка Accept-Language. Для смены языка используйте параметр запроса lang
(

  http://localhost:5119/api/messages?lang=ru для русского языка

  или

  http://localhost:5119/api/messages?lang=en для английского языка

).

## Структура проекта

- **Controllers** — контроллеры для обработки API-запросов
- **Models** — модели данных для базы
- **DTOs** — классы DTO для обмена данными
- **Services** — сервисы для бизнес-логики
- **Middlewares** — промежуточное ПО, включая локализацию
- **Data** — настройки базы данных и инициализация
- **Resources** — файлы локализации

## Запуск с Docker

Для запуска базы данных и приложения в контейнерах:

1. Убедитесь, что у вас установлен Docker и Docker Compose.
2. Склонируйте репозиторий и перейдите в папку проекта.
3. Запустите команду:

```bash
docker-compose up -d
```

Это создаст и запустит два контейнера:

- **db** для PostgreSQL
- **app** для API-приложения

4. Приложение будет доступно по адресу http://localhost:5119, а база данных — на порту, указанном в docker-compose.yml.
Для остановки контейнеров используйте:

```bash
docker-compose down
```

5. Полный список команд:

```bash
dotnet clean # Очистка всех временных файлов
dotnet restore # Восстановление всех зависимостей
dotnet test # Запуск тестов
dotnet build # Сборка проекта
dotnet run # Запуск приложения
```

После запуска пройдите по ссылке, чтобы работать с API:

```
http://localhost:5119/swagger
```